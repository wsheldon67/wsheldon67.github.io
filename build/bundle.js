var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function r(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function l(t,e){t.appendChild(e)}function i(t,e,n){t.insertBefore(e,n||null)}function u(t){t.parentNode.removeChild(t)}function a(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function s(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function d(){return f(" ")}function p(){return f("")}function h(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function g(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function m(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function $(t,e){t.value=null==e?"":e}let b;function v(t){b=t}function k(){if(!b)throw new Error("Function called outside component initialization");return b}const w=[],y=[],_=[],x=[],C=Promise.resolve();let E=!1;function N(t){_.push(t)}const S=new Set;let z=0;function L(){const t=b;do{for(;z<w.length;){const t=w[z];z++,v(t),j(t.$$)}for(v(null),w.length=0,z=0;y.length;)y.pop()();for(let t=0;t<_.length;t+=1){const e=_[t];S.has(e)||(S.add(e),e())}_.length=0}while(w.length);for(;x.length;)x.pop()();E=!1,S.clear(),v(t)}function j(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(N)}}const I=new Set;let O;function T(){O={r:0,c:[],p:O}}function A(){O.r||o(O.c),O=O.p}function M(t,e){t&&t.i&&(I.delete(t),t.i(e))}function q(t,e,n,o){if(t&&t.o){if(I.has(t))return;I.add(t),O.c.push((()=>{I.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}function D(t,e){const n=e.token={};function o(t,o,r,c){if(e.token!==n)return;e.resolved=c;let l=e.ctx;void 0!==r&&(l=l.slice(),l[r]=c);const i=t&&(e.current=t)(l);let u=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==o&&t&&(T(),q(t,1,1,(()=>{e.blocks[n]===t&&(e.blocks[n]=null)})),A())})):e.block.d(1),i.c(),M(i,1),i.m(e.mount(),e.anchor),u=!0),e.block=i,e.blocks&&(e.blocks[o]=i),u&&L()}if((r=t)&&"object"==typeof r&&"function"==typeof r.then){const n=k();if(t.then((t=>{v(n),o(e.then,1,e.value,t),v(null)}),(t=>{if(v(n),o(e.catch,2,e.error,t),v(null),!e.hasCatch)throw t})),e.current!==e.pending)return o(e.pending,0),!0}else{if(e.current!==e.then)return o(e.then,1,e.value,t),!0;e.resolved=t}var r}function P(t,n,c,l){const{fragment:i,on_mount:u,on_destroy:a,after_update:s}=t.$$;i&&i.m(n,c),l||N((()=>{const n=u.map(e).filter(r);a?a.push(...n):o(n),t.$$.on_mount=[]})),s.forEach(N)}function R(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function J(t,e){-1===t.$$.dirty[0]&&(w.push(t),E||(E=!0,C.then(L)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function W(e,r,c,l,i,a,s,f=[-1]){const d=b;v(e);const p=e.$$={fragment:null,ctx:null,props:a,update:t,not_equal:i,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(r.context||(d?d.$$.context:[])),callbacks:n(),dirty:f,skip_bound:!1,root:r.target||d.$$.root};s&&s(p.root);let h=!1;if(p.ctx=c?c(e,r.props||{},((t,n,...o)=>{const r=o.length?o[0]:n;return p.ctx&&i(p.ctx[t],p.ctx[t]=r)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](r),h&&J(e,t)),n})):[],p.update(),h=!0,o(p.before_update),p.fragment=!!l&&l(p.ctx),r.target){if(r.hydrate){const t=function(t){return Array.from(t.childNodes)}(r.target);p.fragment&&p.fragment.l(t),t.forEach(u)}else p.fragment&&p.fragment.c();r.intro&&M(e.$$.fragment),P(e,r.target,r.anchor,r.customElement),L()}v(d)}class B{$destroy(){R(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function F(t,e,n){const o=t.slice();return o[17]=e[n][0],o[19]=n,o}function G(e){return{c:t,m:t,p:t,d:t}}function V(t){let e,n=t[16],o=[];for(let e=0;e<n.length;e+=1)o[e]=Q(F(t,n,e));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=p()},m(t,n){for(let e=0;e<o.length;e+=1)o[e].m(t,n);i(t,e,n)},p(t,r){if(385&r){let c;for(n=t[16],c=0;c<n.length;c+=1){const l=F(t,n,c);o[c]?o[c].p(l,r):(o[c]=Q(l),o[c].c(),o[c].m(e.parentNode,e))}for(;c<o.length;c+=1)o[c].d(1);o.length=n.length}},d(t){a(o,t),t&&u(e)}}}function H(t){let e,n,o;function r(){return t[12](t[17])}return{c(){e=s("button"),e.textContent="Reveal\r\n    "},m(t,c){i(t,e,c),n||(o=h(e,"click",r),n=!0)},p(e,n){t=e},d(t){t&&u(e),n=!1,o()}}}function K(t){let e,n,o=t[17]+"";return{c(){e=s("p"),n=f(o)},m(t,o){i(t,e,o),l(e,n)},p(t,e){128&e&&o!==(o=t[17]+"")&&m(n,o)},d(t){t&&u(e)}}}function Q(t){let e,n,o,r,c,a=t[19]+1+"";function h(t,e){return 129&e&&(r=null),null==r&&(r=!!t[0].includes(t[17])),r?K:H}let g=h(t,-1),m=g(t);return{c(){e=s("p"),n=f(a),o=d(),m.c(),c=p()},m(t,r){i(t,e,r),l(e,n),i(t,o,r),m.m(t,r),i(t,c,r)},p(t,e){g===(g=h(t,e))&&m?m.p(t,e):(m.d(1),m=g(t),m&&(m.c(),m.m(c.parentNode,c)))},d(t){t&&u(e),t&&u(o),m.d(t),t&&u(c)}}}function U(e){let n;return{c(){n=f("Loading...")},m(t,e){i(t,n,e)},p:t,d(t){t&&u(n)}}}function X(t){let e,n,o,r,c,a,p,$,b,v,k,w,y,_,x,C,E,N,S=t[0].length+"";return{c(){e=s("div"),n=s("h1"),n.textContent="Congratulations!",o=d(),r=s("p"),c=s("a"),a=f(t[3]),$=f("\r\n  was the correct answer."),b=d(),v=s("p"),k=f("It took you "),w=f(S),y=f(" reveals to get the answer."),_=d(),x=s("p"),C=s("button"),C.textContent="Close",g(c,"href",p=`https://en.wikipedia.org/wiki/${t[1]}`),g(e,"class","win")},m(u,s){i(u,e,s),l(e,n),l(e,o),l(e,r),l(r,c),l(c,a),l(r,$),l(e,b),l(e,v),l(v,k),l(v,w),l(v,y),l(e,_),l(e,x),l(x,C),E||(N=h(C,"click",t[13]),E=!0)},p(t,e){8&e&&m(a,t[3]),2&e&&p!==(p=`https://en.wikipedia.org/wiki/${t[1]}`)&&g(c,"href",p),1&e&&S!==(S=t[0].length+"")&&m(w,S)},d(t){t&&u(e),E=!1,N()}}}function Y(e){let n,r,c,a,b,v,k,w,y,_,x,C,E,N=e[0].length+"",S={ctx:e,current:null,token:null,hasCatch:!1,pending:U,then:V,catch:G,value:16};D(y=e[7],S);let z=e[4]&&X(e);return{c(){n=s("form"),r=s("input"),c=d(),a=s("p"),b=f("Words Revealed: "),v=f(N),k=d(),w=s("div"),S.block.c(),_=d(),z&&z.c(),x=p(),g(r,"type","text"),g(r,"placeholder",e[6]),r.disabled=e[5],g(n,"class","guesser"),g(w,"class","cont")},m(t,o){var u;i(t,n,o),l(n,r),$(r,e[2]),l(n,c),l(n,a),l(a,b),l(a,v),i(t,k,o),i(t,w,o),S.block.m(w,S.anchor=null),S.mount=()=>w,S.anchor=null,i(t,_,o),z&&z.m(t,o),i(t,x,o),C||(E=[h(r,"input",e[11]),h(n,"submit",(u=e[9],function(t){return t.preventDefault(),u.call(this,t)}))],C=!0)},p(t,[n]){e=t,64&n&&g(r,"placeholder",e[6]),32&n&&(r.disabled=e[5]),4&n&&r.value!==e[2]&&$(r,e[2]),1&n&&N!==(N=e[0].length+"")&&m(v,N),S.ctx=e,128&n&&y!==(y=e[7])&&D(y,S)||function(t,e,n){const o=e.slice(),{resolved:r}=t;t.current===t.then&&(o[t.value]=r),t.current===t.catch&&(o[t.error]=r),t.block.p(o,n)}(S,e,n),e[4]?z?z.p(e,n):(z=X(e),z.c(),z.m(x.parentNode,x)):z&&(z.d(1),z=null)},i:t,o:t,d(t){t&&u(n),t&&u(k),t&&u(w),S.block.d(),S.token=null,S=null,t&&u(_),z&&z.d(t),t&&u(x),C=!1,o(E)}}}function Z(t,e,n){let o,r,c,{title:l}=e,{revealed_list:i}=e,u="",a="",s=!1,f=!1;async function d(t){console.log("loading",t);const e=await async function(t){const e=`https://en.wikipedia.org/w/api.php?action=query&prop=extracts&titles=${t}&explaintext=1&formatversion=2&exsectionformat=plain&format=json&origin=*`,n=await fetch(e);if(!n.ok)throw Error(n.statusText);return(await n.json()).query.pages[0]}(t);n(3,a=e.title);const o=function(t){return t.match(/(\w|')+/g)}(e.extract),r=function(t){return t.reduce(((t,e)=>t.set(e.toLowerCase(),(t.get(e.toLowerCase())||0)+1)),new Map)}(o),c=[...r.entries()];let l;return l=c.length>500?c.slice(0,500):c,l.sort(((t,e)=>e[1]-t[1])),console.log(l),l}function p(t){n(0,i=[...i,t]),localStorage.setItem("revealed_list",JSON.stringify(i)),n(10,f=!0)}return t.$$set=t=>{"title"in t&&n(1,l=t.title),"revealed_list"in t&&n(0,i=t.revealed_list)},t.$$.update=()=>{2&t.$$.dirty&&n(7,o=d(l)),1024&t.$$.dirty&&n(6,r=f?"Make a Guess":"Reveal a Word"),1024&t.$$.dirty&&n(5,c=!f)},[i,l,u,a,s,c,r,o,p,function(){u.toLowerCase()===a.toLowerCase()&&n(4,s=!0),n(2,u=""),n(10,f=!1)},f,function(){u=this.value,n(2,u)},t=>{p(t)},()=>{n(4,s=!1)}]}class tt extends B{constructor(t){super(),W(this,t,Z,Y,c,{title:1,revealed_list:0})}}const et=["Pet_door","Valencia"];function nt(t,e,n){const o=t.slice();return o[9]=e[n],o[11]=n,o}function ot(t){let e,n,o,r,c,l;return o=new tt({props:{title:t[1],revealed_list:t[2]}}),{c(){var t;e=s("button"),e.textContent="Change Puzzle",n=d(),(t=o.$$.fragment)&&t.c()},m(u,a){i(u,e,a),i(u,n,a),P(o,u,a),r=!0,c||(l=h(e,"click",t[6]),c=!0)},p(t,e){const n={};2&e&&(n.title=t[1]),4&e&&(n.revealed_list=t[2]),o.$set(n)},i(t){r||(M(o.$$.fragment,t),r=!0)},o(t){q(o.$$.fragment,t),r=!1},d(t){t&&u(e),t&&u(n),R(o,t),c=!1,l()}}}function rt(e){let n,o=e[3],r=[];for(let t=0;t<o.length;t+=1)r[t]=ct(nt(e,o,t));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();n=p()},m(t,e){for(let n=0;n<r.length;n+=1)r[n].m(t,e);i(t,n,e)},p(t,e){if(24&e){let c;for(o=t[3],c=0;c<o.length;c+=1){const l=nt(t,o,c);r[c]?r[c].p(l,e):(r[c]=ct(l),r[c].c(),r[c].m(n.parentNode,n))}for(;c<r.length;c+=1)r[c].d(1);r.length=o.length}},i:t,o:t,d(t){a(r,t),t&&u(n)}}}function ct(t){let e,n,o,r,c,a=t[3].length-t[11]+"";function p(){return t[5](t[11])}return{c(){e=s("button"),n=f(a),o=d()},m(t,u){i(t,e,u),l(e,n),l(e,o),r||(c=h(e,"click",p),r=!0)},p(e,n){t=e},d(t){t&&u(e),r=!1,c()}}}function lt(t){let e,n,o,r;const c=[rt,ot],l=[];function a(t,e){return t[0]?0:1}return e=a(t),n=l[e]=c[e](t),{c(){n.c(),o=p()},m(t,n){l[e].m(t,n),i(t,o,n),r=!0},p(t,[r]){let i=e;e=a(t),e===i?l[e].p(t,r):(T(),q(l[i],1,1,(()=>{l[i]=null})),A(),n=l[e],n?n.p(t,r):(n=l[e]=c[e](t),n.c()),M(n,1),n.m(o.parentNode,o))},i(t){r||(M(n),r=!0)},o(t){q(n),r=!1},d(t){l[e].d(t),t&&u(o)}}}function it(t,e,n){let o=!1;const r=new Date("2022-05-19"),c=Math.floor(((new Date).getTime()-r.getTime())/864e5);let l=localStorage.getItem("puzzle_title")||(i=c,console.log(i),et[i]);var i;let u=JSON.parse(localStorage.getItem("revealed_list"))||[],a=et.slice(0,c+1);function s(t){localStorage.setItem("puzzle_title",t),localStorage.removeItem("revealed_list"),n(1,l=t),n(2,u=[]),n(0,o=!1)}return[o,l,u,a,s,t=>{s(a[a.length-t-1])},()=>{n(0,o=!0)}]}return new class extends B{constructor(t){super(),W(this,t,it,lt,c,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
